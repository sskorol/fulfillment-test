"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
const dialogflow_fulfillment_1 = require("dialogflow-fulfillment");
const functions = require("firebase-functions");
const DefaultFallbackIntent_1 = require("./intents/DefaultFallbackIntent");
const WelcomeIntent_1 = require("./intents/WelcomeIntent");
exports.dialogflowFirebaseFulfillment = functions.https.onRequest((request, response) => {
    const agent = new dialogflow_fulfillment_1.WebhookClient({ request, response });
    const intents = [
        new DefaultFallbackIntent_1.default(agent),
        new WelcomeIntent_1.default(agent),
    ];
    const intentMap = new Map(intents.map(intent => [intent.name, intent.handle]));
    agent.handleRequest(intentMap);
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJpbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOztBQUFBLG1FQUF1RDtBQUV2RCxnREFBZ0Q7QUFFaEQsMkVBQW9FO0FBQ3BFLDJEQUFvRDtBQUVwRCxPQUFPLENBQUMsNkJBQTZCLEdBQUcsU0FBUyxDQUFDLEtBQUssQ0FBQyxTQUFTLENBQy9ELENBQUMsT0FBd0IsRUFBRSxRQUEwQixFQUFFLEVBQUU7SUFDdkQsTUFBTSxLQUFLLEdBQWtCLElBQUksc0NBQWEsQ0FBQyxFQUFFLE9BQU8sRUFBRSxRQUFRLEVBQUUsQ0FBQyxDQUFDO0lBRXRFLE1BQU0sT0FBTyxHQUFvQjtRQUMvQixJQUFJLCtCQUFxQixDQUFDLEtBQUssQ0FBQztRQUNoQyxJQUFJLHVCQUFhLENBQUMsS0FBSyxDQUFDO0tBQ3pCLENBQUM7SUFFRixNQUFNLFNBQVMsR0FBRyxJQUFJLEdBQUcsQ0FDdkIsT0FBTyxDQUFDLEdBQUcsQ0FBQyxNQUFNLENBQUMsRUFBRSxDQUFDLENBQUMsTUFBTSxDQUFDLElBQUksRUFBRSxNQUFNLENBQUMsTUFBTSxDQUF5QyxDQUFDLENBQzVGLENBQUM7SUFDRixLQUFLLENBQUMsYUFBYSxDQUFDLFNBQVMsQ0FBQyxDQUFDO0FBQ2pDLENBQUMsQ0FDRixDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgV2ViaG9va0NsaWVudCB9IGZyb20gJ2RpYWxvZ2Zsb3ctZnVsZmlsbG1lbnQnO1xuaW1wb3J0ICogYXMgZXhwcmVzcyBmcm9tICdleHByZXNzJztcbmltcG9ydCAqIGFzIGZ1bmN0aW9ucyBmcm9tICdmaXJlYmFzZS1mdW5jdGlvbnMnO1xuaW1wb3J0IEludGVudEhhbmRsZXIgZnJvbSAnLi9pbnRlbnRzL0ludGVudEhhbmRsZXInO1xuaW1wb3J0IERlZmF1bHRGYWxsYmFja0ludGVudCBmcm9tICcuL2ludGVudHMvRGVmYXVsdEZhbGxiYWNrSW50ZW50JztcbmltcG9ydCBXZWxjb21lSW50ZW50IGZyb20gJy4vaW50ZW50cy9XZWxjb21lSW50ZW50JztcblxuZXhwb3J0cy5kaWFsb2dmbG93RmlyZWJhc2VGdWxmaWxsbWVudCA9IGZ1bmN0aW9ucy5odHRwcy5vblJlcXVlc3QoXG4gIChyZXF1ZXN0OiBleHByZXNzLlJlcXVlc3QsIHJlc3BvbnNlOiBleHByZXNzLlJlc3BvbnNlKSA9PiB7XG4gICAgY29uc3QgYWdlbnQ6IFdlYmhvb2tDbGllbnQgPSBuZXcgV2ViaG9va0NsaWVudCh7IHJlcXVlc3QsIHJlc3BvbnNlIH0pO1xuXG4gICAgY29uc3QgaW50ZW50czogSW50ZW50SGFuZGxlcltdID0gW1xuICAgICAgbmV3IERlZmF1bHRGYWxsYmFja0ludGVudChhZ2VudCksXG4gICAgICBuZXcgV2VsY29tZUludGVudChhZ2VudCksXG4gICAgXTtcblxuICAgIGNvbnN0IGludGVudE1hcCA9IG5ldyBNYXAoXG4gICAgICBpbnRlbnRzLm1hcChpbnRlbnQgPT4gW2ludGVudC5uYW1lLCBpbnRlbnQuaGFuZGxlXSBhcyBbc3RyaW5nLCAoKSA9PiBQcm9taXNlPHZvaWQ+IHwgdm9pZF0pXG4gICAgKTtcbiAgICBhZ2VudC5oYW5kbGVSZXF1ZXN0KGludGVudE1hcCk7XG4gIH1cbik7XG4iXX0=